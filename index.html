<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Top 10 Malaysian Banks Performance with base 1 Jul 2024</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/luxon@3/build/global/luxon.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon"></script>
  <style>
    :root { font-family: 'Segoe UI', Tahoma, sans-serif; background:#f4f4f4; }
    body { margin:0; padding:1rem; }
    h1 { text-align:center; }
    .container { max-width:1200px; margin:0 auto; background:#fff; padding:1rem 2rem; box-shadow:0 2px 8px rgba(0,0,0,0.1); }
    .meta { text-align:center; color:#666; margin-bottom:1rem; }
    canvas { width:100%; max-height:600px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Top 10 Malaysian Banks Performance with base 1 Jul 2024</h1>
    <p class="meta">Last updated: <span id="updatedAt">Loading latest dataâ€¦</span></p>
    <canvas id="banksChart"></canvas>
  </div>
  <script>
    async function initChart() {
      const meta = document.getElementById('updatedAt');
      try {
        const response = await fetch('chart-data.json', { cache: 'no-cache' });
        if (!response.ok) {
          throw new Error(`Failed to fetch chart data: ${response.status}`);
        }
        const chartData = await response.json();
        meta.textContent = chartData.updatedAtLabel || chartData.updatedAt || 'Unknown';
        const ctx = document.getElementById('banksChart').getContext('2d');
        new Chart(ctx, {
          type: 'line',
          data: { datasets: chartData.datasets },
          options: {
            responsive: true,
            interaction: { mode: 'nearest', axis: 'x', intersect: false },
            stacked: false,
            scales: {
              x: { type: 'time', time: { unit: 'month' }, title: { display: true, text: 'Date' } },
              y: {
                title: { display: true, text: chartData.yTitle || 'Relative Price' },
                ticks: { callback: (value) => (typeof value === 'number' ? value.toFixed(2) : value) }
              }
            },
            plugins: { legend: { position: 'bottom' } }
          }
        });
      } catch (error) {
        meta.textContent = 'Failed to load data';
        console.error(error);
      }
    }
    initChart();
  </script>
</body>
</html>
